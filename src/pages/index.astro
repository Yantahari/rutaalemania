---
import BaseLayout from '../layouts/BaseLayout.astro';

const homeSchema = {
  '@context': 'https://schema.org',
  '@type': 'WebSite',
  name: 'RutaAlemania',
  url: 'https://rutaalemania.com',
  description: 'Gu√≠a pr√°ctica para hispanohablantes que quieren trabajar en Alemania.',
  author: {
    '@type': 'Person',
    name: 'Carlos Dom√≠nguez Cid',
  },
  potentialAction: {
    '@type': 'SearchAction',
    target: 'https://rutaalemania.com/blog/?q={search_term_string}',
    'query-input': 'required name=search_term_string',
  },
};

const blogPostFiles = import.meta.glob('./blog/*.md', { eager: true });
const blogPosts = Object.values(blogPostFiles) as any[];
const latestPosts = blogPosts
  .sort((a, b) => new Date(b.frontmatter.date).getTime() - new Date(a.frontmatter.date).getTime())
  .slice(0, 3);
---

<BaseLayout
  title="RutaAlemania ‚Äî Tu gu√≠a para trabajar en Alemania"
  description="Gu√≠a pr√°ctica, calculadora Chancenkarte gratuita y recursos para hispanohablantes que quieren emigrar y trabajar en Alemania."
  keywords="trabajar en alemania, emigrar a alemania, chancenkarte, visa alemania, trabajo alemania"
  schema={homeSchema}
>
  <!-- HERO -->
  <section class="relative overflow-hidden">
    <div class="absolute inset-0 bg-gradient-to-b from-midnight/50 to-coal pointer-events-none"></div>
    <div class="container-wide relative py-20 md:py-32 text-center">
      <div class="badge mb-6">Gu√≠a gratuita para hispanohablantes</div>
      <h1 class="text-4xl md:text-5xl lg:text-6xl font-heading font-bold leading-tight mb-6 max-w-4xl mx-auto">
        Tu camino para trabajar en <em class="text-amber-light italic">Alemania</em> empieza aqu√≠
      </h1>
      <p class="text-white/50 text-lg md:text-xl max-w-2xl mx-auto mb-10 leading-relaxed">
        Calculadora Chancenkarte gratuita, gu√≠as pr√°cticas paso a paso y recursos verificados.
        De hispanohablante a hispanohablante, desde Alemania.
      </p>
      <div class="flex flex-col sm:flex-row gap-4 justify-center">
        <a href="#calculadora" class="btn-primary text-lg px-8 py-4">
          Calcula tus puntos gratis
        </a>
        <a href="/blog/" class="btn-secondary text-lg px-8 py-4">
          Leer gu√≠as
        </a>
      </div>
    </div>
  </section>

  <!-- ABOUT ME (brief) -->
  <section class="container-wide py-16 md:py-24" id="sobre-mi">
    <div class="grid md:grid-cols-2 gap-12 items-center">
      <div>
        <div class="badge mb-4">Sobre m√≠</div>
        <h2 class="text-3xl md:text-4xl font-heading mb-6">
          Soy <span class="text-amber-light">Carlos</span>, y ya hice este camino
        </h2>
        <p class="text-white/60 leading-relaxed mb-4">
          Bi√≥logo espa√±ol de vocaci√≥n, pas√© a la ense√±anza para compartir mi pasi√≥n por la naturaleza.
          La paternidad me llev√≥ a Alemania, donde tuve que reinventarme: aprender un idioma nuevo,
          adaptarme a otra cultura y navegar la burocracia alemana.
        </p>
        <p class="text-white/60 leading-relaxed mb-6">
          Ahora vivo en Freiburg y ayudo a otros hispanohablantes a simplificar el proceso.
          No soy abogado ‚Äî soy alguien que pas√≥ por todo esto y quiere ahorrarte tiempo y frustraciones.
        </p>
        <a href="/sobre-mi/" class="text-amber-light font-semibold hover:underline">
          Conoce mi historia completa &rarr;
        </a>
      </div>
      <div class="card p-8 text-center">
        <div class="text-6xl mb-4">üá©üá™</div>
        <h3 class="text-xl font-heading mb-2">Desde Freiburg, Alemania</h3>
        <p class="text-white/50 text-sm">
          Informaci√≥n pr√°ctica y actualizada, porque vivo aqu√≠ y s√© lo que piden en cada oficina.
        </p>
      </div>
    </div>
  </section>

  <!-- CALCULADORA CHANCENKARTE -->
  <section class="bg-midnight/30 py-16 md:py-24" id="calculadora">
    <div class="container-narrow">
      <div id="chancenkarte-calculator">
        <!-- Calculator component loaded here -->
      </div>
    </div>
  </section>

  <!-- SIMULADOR -->
  <section class="container-wide py-16 md:py-24" id="simulador">
    <div class="text-center mb-12">
      <div class="badge mb-4">Herramienta interactiva</div>
      <h2 class="text-3xl md:text-4xl font-heading mb-4">
        Simulador de vida en <span class="text-amber-light">Alemania</span>
      </h2>
      <p class="text-white/50 max-w-xl mx-auto">
        Descubre cu√°nto ganar√≠as, cu√°nto gastar√≠as y cu√°nto te quedar√≠a libre cada mes seg√∫n tu profesi√≥n y ciudad.
      </p>
    </div>
    <div id="life-simulator">
      <!-- Simulator component loaded here -->
    </div>
  </section>

  <!-- BLOG PREVIEW -->
  <section class="container-wide py-16 md:py-24">
    <div class="text-center mb-12">
      <div class="badge mb-4">Blog</div>
      <h2 class="text-3xl md:text-4xl font-heading mb-4">Gu√≠as pr√°cticas</h2>
      <p class="text-white/50 max-w-xl mx-auto">
        Art√≠culos detallados sobre todo lo que necesitas saber para trabajar y vivir en Alemania.
      </p>
    </div>
    <div class="grid md:grid-cols-3 gap-6">
      {latestPosts.map(post => (
        <a href={post.url} class="card group">
          <p class="text-xs text-amber/70 mb-2">
            {new Date(post.frontmatter.date).toLocaleDateString('es-ES', { year: 'numeric', month: 'short', day: 'numeric' })}
          </p>
          <h3 class="font-heading text-lg mb-2 group-hover:text-amber-light transition-colors">
            {post.frontmatter.title}
          </h3>
          <p class="text-white/40 text-sm leading-relaxed line-clamp-3">
            {post.frontmatter.description}
          </p>
        </a>
      ))}
    </div>
    <div class="text-center mt-8">
      <a href="/blog/" class="btn-secondary">Ver todos los art√≠culos &rarr;</a>
    </div>
  </section>

  <!-- CTA FINAL -->
  <section class="container-wide py-16 md:py-24">
    <div class="bg-gradient-to-br from-midnight to-ocean rounded-3xl p-10 md:p-16 text-center border border-white/[0.08]">
      <h2 class="text-3xl md:text-4xl font-heading mb-4">
        ¬øListo para dar el primer paso?
      </h2>
      <p class="text-white/50 max-w-xl mx-auto mb-8">
        Haz el test gratuito de Chancenkarte, explora nuestros recursos y empieza a planificar tu nueva vida en Alemania.
      </p>
      <div class="flex flex-col sm:flex-row gap-4 justify-center">
        <a href="#calculadora" class="btn-primary">Calculadora Chancenkarte</a>
        <a href="/recursos/" class="btn-secondary">Ver recursos</a>
      </div>
    </div>
  </section>

  <!-- AD SPACE -->
  <div class="container-narrow py-8">
    <div class="p-6 bg-white/[0.02] border border-dashed border-white/[0.08] rounded-xl text-center text-xs text-white/20">
      [ Espacio reservado para Google AdSense ]
    </div>
  </div>
</BaseLayout>
